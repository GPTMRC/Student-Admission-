{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BaylonFam\\\\student-admission-system\\\\client-admin\\\\src\\\\components\\\\GradeAdvisingPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { supabase } from '../supabaseClient';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GradeAdvisingPage = () => {\n  _s();\n  const [statusTab, setStatusTab] = useState('irregular'); // irregular | dropped | transferee | all\n  const [students, setStudents] = useState([]);\n  const [studentsLoading, setStudentsLoading] = useState(true);\n  const [studentsError, setStudentsError] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [advisingRecords, setAdvisingRecords] = useState([]);\n  const [advisingLoading, setAdvisingLoading] = useState(false);\n  const [subjects, setSubjects] = useState([]);\n  const [subjectsLoading, setSubjectsLoading] = useState(false);\n  const [newSubjectId, setNewSubjectId] = useState('');\n  const [newSection, setNewSection] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  // ---- Helpers ----\n  const isIrregularStudent = useMemo(() => {\n    if (!(selectedStudent !== null && selectedStudent !== void 0 && selectedStudent.enrollment_status)) return false;\n    return selectedStudent.enrollment_status.toLowerCase() === 'irregular';\n  }, [selectedStudent]);\n  const statusTabs = [{\n    id: 'irregular',\n    label: 'Irregular'\n  }, {\n    id: 'dropped',\n    label: 'Dropped'\n  }, {\n    id: 'transferee',\n    label: 'Transferee'\n  }, {\n    id: 'all',\n    label: 'All Students'\n  }];\n\n  // Total units for display\n  const totalUnits = useMemo(() => {\n    return advisingRecords.reduce((sum, rec) => {\n      var _rec$subjects;\n      if (rec.units != null) return sum + rec.units;\n      if (((_rec$subjects = rec.subjects) === null || _rec$subjects === void 0 ? void 0 : _rec$subjects.units) != null) return sum + rec.subjects.units;\n      return sum;\n    }, 0);\n  }, [advisingRecords]);\n\n  // ---- Load students when tab changes ----\n  useEffect(() => {\n    const fetchStudents = async () => {\n      setStudentsLoading(true);\n      setStudentsError('');\n      setSelectedStudent(null);\n      setAdvisingRecords([]);\n      setSubjects([]);\n      try {\n        let query = supabase.from('institutional_students').select('*').order('last_name', {\n          ascending: true\n        });\n        if (statusTab !== 'all') {\n          query = query.eq('enrollment_status', statusTab);\n        }\n        const {\n          data,\n          error\n        } = await query;\n        if (error) throw error;\n        setStudents(data || []);\n      } catch (err) {\n        console.error('Error loading students:', err);\n        setStudentsError(err.message || 'Failed to load students');\n      } finally {\n        setStudentsLoading(false);\n      }\n    };\n    fetchStudents();\n  }, [statusTab]);\n\n  // Client-side filter by search\n  const filteredStudents = useMemo(() => {\n    if (!searchTerm.trim()) return students;\n    const term = searchTerm.toLowerCase();\n    return students.filter(s => {\n      var _s$student_number, _s$last_name, _s$first_name;\n      const sn = ((_s$student_number = s.student_number) === null || _s$student_number === void 0 ? void 0 : _s$student_number.toLowerCase()) || '';\n      const ln = ((_s$last_name = s.last_name) === null || _s$last_name === void 0 ? void 0 : _s$last_name.toLowerCase()) || '';\n      const fn = ((_s$first_name = s.first_name) === null || _s$first_name === void 0 ? void 0 : _s$first_name.toLowerCase()) || '';\n      return sn.includes(term) || ln.includes(term) || fn.includes(term);\n    });\n  }, [students, searchTerm]);\n\n  // ---- Load advising records when a student is selected ----\n  useEffect(() => {\n    if (!selectedStudent) return;\n    const fetchAdvising = async () => {\n      setAdvisingLoading(true);\n      setErrorMessage('');\n      try {\n        const {\n          data,\n          error\n        } = await supabase.from('grade_advising').select(`\n            id,\n            student_id,\n            subject,\n            year_level,\n            status,\n            section,\n            units,\n            created_at,\n            subjects:subject_id (\n              id,\n              subject_code,\n              subject_name,\n              units,\n              available_slot,\n              allowed_status,\n              section\n            )\n          `).eq('student_id', selectedStudent.id).order('created_at', {\n          ascending: true\n        });\n        if (error) throw error;\n        setAdvisingRecords(data || []);\n      } catch (err) {\n        console.error('Error loading advising records:', err);\n        setErrorMessage(err.message || 'Failed to load grade advising');\n      } finally {\n        setAdvisingLoading(false);\n      }\n    };\n    fetchAdvising();\n  }, [selectedStudent]);\n\n  // ---- Load subjects based on selectedStudent (and irregular rule) ----\n  useEffect(() => {\n    if (!selectedStudent) return;\n    const fetchSubjects = async () => {\n      setSubjectsLoading(true);\n      setErrorMessage('');\n      try {\n        let query = supabase.from('subjects').select('*').order('subject_code', {\n          ascending: true\n        });\n\n        // Try to match year level, if parsable (e.g. \"1st Year\" -> 1)\n        if (selectedStudent.year_level) {\n          const parsed = parseInt(selectedStudent.year_level, 10);\n          if (!Number.isNaN(parsed)) {\n            query = query.eq('year_level', parsed);\n          }\n        }\n\n        // If irregular student, only fetch subjects allowed for irregular/both\n        if (isIrregularStudent) {\n          query = query.in('allowed_status', ['irregular', 'both']);\n        }\n        const {\n          data,\n          error\n        } = await query;\n        if (error) throw error;\n        setSubjects(data || []);\n      } catch (err) {\n        console.error('Error loading subjects:', err);\n        setErrorMessage(err.message || 'Failed to load subjects');\n      } finally {\n        setSubjectsLoading(false);\n      }\n    };\n    fetchSubjects();\n  }, [selectedStudent, isIrregularStudent]);\n\n  // ---- Add new advising record ----\n  const handleAddAdvising = async e => {\n    e.preventDefault();\n    setErrorMessage('');\n    if (!selectedStudent) {\n      setErrorMessage('Please select a student first.');\n      return;\n    }\n    if (!newSubjectId) {\n      setErrorMessage('Please choose a subject.');\n      return;\n    }\n    const subject = subjects.find(s => s.id === newSubjectId);\n    if (!subject) {\n      setErrorMessage('Selected subject not found.');\n      return;\n    }\n\n    // Additional safety: irregular student cannot take regular-only subject\n    if (isIrregularStudent && subject.allowed_status && subject.allowed_status.toLowerCase() === 'regular') {\n      setErrorMessage('This subject is only available for regular students. Irregular students cannot take it.');\n      return;\n    }\n    setSaving(true);\n    try {\n      const displaySubject = `${subject.subject_code || ''}`.trim() && subject.subject_name ? `${subject.subject_code} - ${subject.subject_name}` : subject.subject_name || subject.subject_code || subject.subject || 'Subject';\n      const insertPayload = {\n        student_id: selectedStudent.id,\n        subject_id: subject.id,\n        subject: displaySubject,\n        // snapshot text\n        year_level: subject.year_level,\n        section: newSection || subject.section || '',\n        units: subject.units,\n        // save status as student's status at the time of advising (regular/irregular/etc.)\n        status: selectedStudent.enrollment_status || 'active'\n      };\n      const {\n        error\n      } = await supabase.from('grade_advising').insert(insertPayload);\n      if (error) throw error;\n\n      // refresh advising list\n      const {\n        data: updated,\n        error: reloadError\n      } = await supabase.from('grade_advising').select(`\n          id,\n          student_id,\n          subject,\n          year_level,\n          status,\n          section,\n          units,\n          created_at,\n          subjects:subject_id (\n            id,\n            subject_code,\n            subject_name,\n            units,\n            available_slot,\n            allowed_status,\n            section\n          )\n        `).eq('student_id', selectedStudent.id).order('created_at', {\n        ascending: true\n      });\n      if (reloadError) throw reloadError;\n      setAdvisingRecords(updated || []);\n      setNewSubjectId('');\n      setNewSection('');\n    } catch (err) {\n      console.error('Error adding advising record:', err);\n      setErrorMessage(err.message || 'Failed to add subject to grade advising.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // ---- Mark a subject as dropped (per advising record) ----\n  const handleMarkDropped = async record => {\n    try {\n      const {\n        error\n      } = await supabase.from('grade_advising').update({\n        status: 'dropped'\n      }).eq('id', record.id);\n      if (error) throw error;\n      setAdvisingRecords(prev => prev.map(r => r.id === record.id ? {\n        ...r,\n        status: 'dropped'\n      } : r));\n    } catch (err) {\n      console.error('Error marking dropped:', err);\n      setErrorMessage(err.message || 'Failed to mark as dropped.');\n    }\n  };\n\n  // ---- Delete advising record ----\n  const handleDeleteRecord = async record => {\n    if (!window.confirm('Remove this subject from grade advising?')) return;\n    try {\n      const {\n        error\n      } = await supabase.from('grade_advising').delete().eq('id', record.id);\n      if (error) throw error;\n      setAdvisingRecords(prev => prev.filter(r => r.id !== record.id));\n    } catch (err) {\n      console.error('Error deleting advising record:', err);\n      setErrorMessage(err.message || 'Failed to delete advising record.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grade-advising-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grade-advising-tabs\",\n      children: statusTabs.map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `grade-tab ${statusTab === tab.id ? 'active' : ''}`,\n        onClick: () => setStatusTab(tab.id),\n        children: tab.label\n      }, tab.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grade-advising-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grade-advising-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Grade Advising\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), selectedStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grade-advising-status-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Selected Student:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [selectedStudent.student_number, \" \\u2022\", ' ', selectedStudent.last_name, \", \", selectedStudent.first_name, ' ', \"(\", selectedStudent.program_enrolled, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: '0.8rem',\n              color: '#059669'\n            },\n            children: [\"\\u2022 Status:\", ' ', selectedStudent.enrollment_status || 'active']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-banner\",\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '0.75rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-box\",\n          style: {\n            maxWidth: 320\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"search-icon\",\n            children: \"\\uD83D\\uDD0D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search student (ID / name)...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '0.9rem',\n          color: '#065f46',\n          marginBottom: '0.35rem'\n        },\n        children: [\"Students (\", statusTab === 'all' ? 'All' : statusTab, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), studentsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-data\",\n        children: \"Loading students...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 11\n      }, this) : studentsError ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-data\",\n        children: [\"Error loading students: \", studentsError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 11\n      }, this) : filteredStudents.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-data\",\n        children: \"No students found for this filter.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"applications-table-container\",\n        style: {\n          marginBottom: '1rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"applications-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Student No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Program\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Year Level\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: filteredStudents.map(s => /*#__PURE__*/_jsxDEV(\"tr\", {\n              style: {\n                backgroundColor: (selectedStudent === null || selectedStudent === void 0 ? void 0 : selectedStudent.id) === s.id ? '#ecfdf5' : undefined\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: s.student_number\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [s.last_name, \", \", s.first_name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: s.program_enrolled\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: s.year_level\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: s.enrollment_status || 'active'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary micro\",\n                  onClick: () => setSelectedStudent(s),\n                  children: \"Select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 21\n              }, this)]\n            }, s.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 11\n      }, this), selectedStudent && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '0.9rem',\n            color: '#065f46',\n            marginBottom: '0.35rem'\n          },\n          children: [\"Advised Subjects for \", selectedStudent.last_name, \", \", selectedStudent.first_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 13\n        }, this), advisingLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-data\",\n          children: \"Loading grade advising...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 15\n        }, this) : advisingRecords.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-data\",\n          children: \"No subjects advised yet for this student.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"subjects-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Subject\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Section\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Available Slot\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status (Reg/Irreg/Drop)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Units\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Date Advised\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: [advisingRecords.map(rec => {\n                var _subj$allowed_status;\n                const subj = rec.subjects;\n                const displaySubject = subj ? `${subj.subject_code || ''} ${subj.subject_name || ''}`.trim() : rec.subject;\n                const slot = (subj === null || subj === void 0 ? void 0 : subj.available_slot) != null ? subj.available_slot : '—';\n                const units = rec.units != null ? rec.units : (subj === null || subj === void 0 ? void 0 : subj.units) != null ? subj.units : '—';\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: isIrregularStudent && (subj === null || subj === void 0 ? void 0 : (_subj$allowed_status = subj.allowed_status) === null || _subj$allowed_status === void 0 ? void 0 : _subj$allowed_status.toLowerCase()) === 'regular' ? 'row-disabled' : '',\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: displaySubject\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: rec.section || (subj === null || subj === void 0 ? void 0 : subj.section) || '—'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 487,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: slot\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 488,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: rec.status || 'N/A'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 489,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: units\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 490,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: rec.created_at ? new Date(rec.created_at).toLocaleString() : '—'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 491,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        gap: '0.25rem'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn micro btn-secondary\",\n                        type: \"button\",\n                        disabled: rec.status === 'dropped',\n                        onClick: () => handleMarkDropped(rec),\n                        children: \"Drop\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 498,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn micro btn-secondary\",\n                        type: \"button\",\n                        onClick: () => handleDeleteRecord(rec),\n                        children: \"Remove\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 506,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 497,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 496,\n                    columnNumber: 27\n                  }, this)]\n                }, rec.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 25\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"total-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: 4,\n                  style: {\n                    textAlign: 'right',\n                    fontWeight: 600\n                  },\n                  children: \"Total Units:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    fontWeight: 700\n                  },\n                  children: totalUnits\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: 2\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 518,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '0.9rem',\n              color: '#065f46',\n              marginBottom: '0.35rem'\n            },\n            children: \"Add Subject to Advising\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 15\n          }, this), subjectsLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-data\",\n            children: \"Loading subjects...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 17\n          }, this) : subjects.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-data\",\n            children: \"No subjects available for this student's year level / status.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleAddAdvising,\n            style: {\n              display: 'flex',\n              flexWrap: 'wrap',\n              gap: '0.5rem',\n              alignItems: 'center',\n              marginTop: '0.25rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                minWidth: 220,\n                flex: '1 1 220px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.8rem',\n                  color: '#4b5563',\n                  marginBottom: '0.25rem'\n                },\n                children: \"Subject to be taken\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: newSubjectId,\n                onChange: e => setNewSubjectId(e.target.value),\n                style: {\n                  width: '100%',\n                  padding: '0.4rem 0.5rem',\n                  borderRadius: 6,\n                  border: '1px solid #d1e7dd',\n                  fontSize: '0.8rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"-- Select subject --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 23\n                }, this), subjects.map(subj => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: subj.id,\n                  children: [subj.subject_code, \" - \", subj.subject_name, \" (\", subj.units, \" units)\", subj.allowed_status === 'regular' ? ' [Regular only]' : '']\n                }, subj.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 25\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                minWidth: 140\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block',\n                  fontSize: '0.8rem',\n                  color: '#4b5563',\n                  marginBottom: '0.25rem'\n                },\n                children: \"Section\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: newSection,\n                onChange: e => setNewSection(e.target.value),\n                placeholder: \"e.g. BSIT-1A\",\n                style: {\n                  width: '100%',\n                  padding: '0.4rem 0.5rem',\n                  borderRadius: 6,\n                  border: '1px solid #d1e7dd',\n                  fontSize: '0.8rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary micro\",\n                disabled: saving || subjects.length === 0,\n                children: saving ? 'Saving...' : 'Add Subject'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 318,\n    columnNumber: 5\n  }, this);\n};\n_s(GradeAdvisingPage, \"Gy4ywSV49HIFLgTaITRWuHvmQ1g=\");\n_c = GradeAdvisingPage;\nexport default GradeAdvisingPage;\nvar _c;\n$RefreshReg$(_c, \"GradeAdvisingPage\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","supabase","jsxDEV","_jsxDEV","Fragment","_Fragment","GradeAdvisingPage","_s","statusTab","setStatusTab","students","setStudents","studentsLoading","setStudentsLoading","studentsError","setStudentsError","searchTerm","setSearchTerm","selectedStudent","setSelectedStudent","advisingRecords","setAdvisingRecords","advisingLoading","setAdvisingLoading","subjects","setSubjects","subjectsLoading","setSubjectsLoading","newSubjectId","setNewSubjectId","newSection","setNewSection","saving","setSaving","errorMessage","setErrorMessage","isIrregularStudent","enrollment_status","toLowerCase","statusTabs","id","label","totalUnits","reduce","sum","rec","_rec$subjects","units","fetchStudents","query","from","select","order","ascending","eq","data","error","err","console","message","filteredStudents","trim","term","filter","s","_s$student_number","_s$last_name","_s$first_name","sn","student_number","ln","last_name","fn","first_name","includes","fetchAdvising","fetchSubjects","year_level","parsed","parseInt","Number","isNaN","in","handleAddAdvising","e","preventDefault","subject","find","allowed_status","displaySubject","subject_code","subject_name","insertPayload","student_id","subject_id","section","status","insert","updated","reloadError","handleMarkDropped","record","update","prev","map","r","handleDeleteRecord","window","confirm","delete","className","children","tab","onClick","fileName","_jsxFileName","lineNumber","columnNumber","program_enrolled","style","fontSize","color","marginBottom","maxWidth","type","placeholder","value","onChange","target","length","backgroundColor","undefined","_subj$allowed_status","subj","slot","available_slot","created_at","Date","toLocaleString","display","gap","disabled","colSpan","textAlign","fontWeight","marginTop","onSubmit","flexWrap","alignItems","minWidth","flex","width","padding","borderRadius","border","_c","$RefreshReg$"],"sources":["C:/Users/BaylonFam/student-admission-system/client-admin/src/components/GradeAdvisingPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\r\nimport { supabase } from '../supabaseClient';\r\n\r\nconst GradeAdvisingPage = () => {\r\n  const [statusTab, setStatusTab] = useState('irregular'); // irregular | dropped | transferee | all\r\n  const [students, setStudents] = useState([]);\r\n  const [studentsLoading, setStudentsLoading] = useState(true);\r\n  const [studentsError, setStudentsError] = useState('');\r\n\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n\r\n  const [advisingRecords, setAdvisingRecords] = useState([]);\r\n  const [advisingLoading, setAdvisingLoading] = useState(false);\r\n\r\n  const [subjects, setSubjects] = useState([]);\r\n  const [subjectsLoading, setSubjectsLoading] = useState(false);\r\n\r\n  const [newSubjectId, setNewSubjectId] = useState('');\r\n  const [newSection, setNewSection] = useState('');\r\n  const [saving, setSaving] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  // ---- Helpers ----\r\n  const isIrregularStudent = useMemo(() => {\r\n    if (!selectedStudent?.enrollment_status) return false;\r\n    return selectedStudent.enrollment_status.toLowerCase() === 'irregular';\r\n  }, [selectedStudent]);\r\n\r\n  const statusTabs = [\r\n    { id: 'irregular', label: 'Irregular' },\r\n    { id: 'dropped', label: 'Dropped' },\r\n    { id: 'transferee', label: 'Transferee' },\r\n    { id: 'all', label: 'All Students' },\r\n  ];\r\n\r\n  // Total units for display\r\n  const totalUnits = useMemo(() => {\r\n    return advisingRecords.reduce((sum, rec) => {\r\n      if (rec.units != null) return sum + rec.units;\r\n      if (rec.subjects?.units != null) return sum + rec.subjects.units;\r\n      return sum;\r\n    }, 0);\r\n  }, [advisingRecords]);\r\n\r\n  // ---- Load students when tab changes ----\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      setStudentsLoading(true);\r\n      setStudentsError('');\r\n      setSelectedStudent(null);\r\n      setAdvisingRecords([]);\r\n      setSubjects([]);\r\n      try {\r\n        let query = supabase\r\n          .from('institutional_students')\r\n          .select('*')\r\n          .order('last_name', { ascending: true });\r\n\r\n        if (statusTab !== 'all') {\r\n          query = query.eq('enrollment_status', statusTab);\r\n        }\r\n\r\n        const { data, error } = await query;\r\n        if (error) throw error;\r\n\r\n        setStudents(data || []);\r\n      } catch (err) {\r\n        console.error('Error loading students:', err);\r\n        setStudentsError(err.message || 'Failed to load students');\r\n      } finally {\r\n        setStudentsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStudents();\r\n  }, [statusTab]);\r\n\r\n  // Client-side filter by search\r\n  const filteredStudents = useMemo(() => {\r\n    if (!searchTerm.trim()) return students;\r\n    const term = searchTerm.toLowerCase();\r\n    return students.filter((s) => {\r\n      const sn = s.student_number?.toLowerCase() || '';\r\n      const ln = s.last_name?.toLowerCase() || '';\r\n      const fn = s.first_name?.toLowerCase() || '';\r\n      return (\r\n        sn.includes(term) ||\r\n        ln.includes(term) ||\r\n        fn.includes(term)\r\n      );\r\n    });\r\n  }, [students, searchTerm]);\r\n\r\n  // ---- Load advising records when a student is selected ----\r\n  useEffect(() => {\r\n    if (!selectedStudent) return;\r\n\r\n    const fetchAdvising = async () => {\r\n      setAdvisingLoading(true);\r\n      setErrorMessage('');\r\n      try {\r\n        const { data, error } = await supabase\r\n          .from('grade_advising')\r\n          .select(`\r\n            id,\r\n            student_id,\r\n            subject,\r\n            year_level,\r\n            status,\r\n            section,\r\n            units,\r\n            created_at,\r\n            subjects:subject_id (\r\n              id,\r\n              subject_code,\r\n              subject_name,\r\n              units,\r\n              available_slot,\r\n              allowed_status,\r\n              section\r\n            )\r\n          `)\r\n          .eq('student_id', selectedStudent.id)\r\n          .order('created_at', { ascending: true });\r\n\r\n        if (error) throw error;\r\n\r\n        setAdvisingRecords(data || []);\r\n      } catch (err) {\r\n        console.error('Error loading advising records:', err);\r\n        setErrorMessage(err.message || 'Failed to load grade advising');\r\n      } finally {\r\n        setAdvisingLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAdvising();\r\n  }, [selectedStudent]);\r\n\r\n  // ---- Load subjects based on selectedStudent (and irregular rule) ----\r\n  useEffect(() => {\r\n    if (!selectedStudent) return;\r\n\r\n    const fetchSubjects = async () => {\r\n      setSubjectsLoading(true);\r\n      setErrorMessage('');\r\n      try {\r\n        let query = supabase\r\n          .from('subjects')\r\n          .select('*')\r\n          .order('subject_code', { ascending: true });\r\n\r\n        // Try to match year level, if parsable (e.g. \"1st Year\" -> 1)\r\n        if (selectedStudent.year_level) {\r\n          const parsed = parseInt(selectedStudent.year_level, 10);\r\n          if (!Number.isNaN(parsed)) {\r\n            query = query.eq('year_level', parsed);\r\n          }\r\n        }\r\n\r\n        // If irregular student, only fetch subjects allowed for irregular/both\r\n        if (isIrregularStudent) {\r\n          query = query.in('allowed_status', ['irregular', 'both']);\r\n        }\r\n\r\n        const { data, error } = await query;\r\n        if (error) throw error;\r\n\r\n        setSubjects(data || []);\r\n      } catch (err) {\r\n        console.error('Error loading subjects:', err);\r\n        setErrorMessage(err.message || 'Failed to load subjects');\r\n      } finally {\r\n        setSubjectsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSubjects();\r\n  }, [selectedStudent, isIrregularStudent]);\r\n\r\n  // ---- Add new advising record ----\r\n  const handleAddAdvising = async (e) => {\r\n    e.preventDefault();\r\n    setErrorMessage('');\r\n\r\n    if (!selectedStudent) {\r\n      setErrorMessage('Please select a student first.');\r\n      return;\r\n    }\r\n    if (!newSubjectId) {\r\n      setErrorMessage('Please choose a subject.');\r\n      return;\r\n    }\r\n\r\n    const subject = subjects.find((s) => s.id === newSubjectId);\r\n    if (!subject) {\r\n      setErrorMessage('Selected subject not found.');\r\n      return;\r\n    }\r\n\r\n    // Additional safety: irregular student cannot take regular-only subject\r\n    if (\r\n      isIrregularStudent &&\r\n      subject.allowed_status &&\r\n      subject.allowed_status.toLowerCase() === 'regular'\r\n    ) {\r\n      setErrorMessage(\r\n        'This subject is only available for regular students. Irregular students cannot take it.'\r\n      );\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const displaySubject =\r\n        `${subject.subject_code || ''}`.trim() && subject.subject_name\r\n          ? `${subject.subject_code} - ${subject.subject_name}`\r\n          : subject.subject_name || subject.subject_code || subject.subject || 'Subject';\r\n\r\n      const insertPayload = {\r\n        student_id: selectedStudent.id,\r\n        subject_id: subject.id,\r\n        subject: displaySubject, // snapshot text\r\n        year_level: subject.year_level,\r\n        section: newSection || subject.section || '',\r\n        units: subject.units,\r\n        // save status as student's status at the time of advising (regular/irregular/etc.)\r\n        status: selectedStudent.enrollment_status || 'active',\r\n      };\r\n\r\n      const { error } = await supabase\r\n        .from('grade_advising')\r\n        .insert(insertPayload);\r\n\r\n      if (error) throw error;\r\n\r\n      // refresh advising list\r\n      const { data: updated, error: reloadError } = await supabase\r\n        .from('grade_advising')\r\n        .select(`\r\n          id,\r\n          student_id,\r\n          subject,\r\n          year_level,\r\n          status,\r\n          section,\r\n          units,\r\n          created_at,\r\n          subjects:subject_id (\r\n            id,\r\n            subject_code,\r\n            subject_name,\r\n            units,\r\n            available_slot,\r\n            allowed_status,\r\n            section\r\n          )\r\n        `)\r\n        .eq('student_id', selectedStudent.id)\r\n        .order('created_at', { ascending: true });\r\n\r\n      if (reloadError) throw reloadError;\r\n\r\n      setAdvisingRecords(updated || []);\r\n      setNewSubjectId('');\r\n      setNewSection('');\r\n    } catch (err) {\r\n      console.error('Error adding advising record:', err);\r\n      setErrorMessage(err.message || 'Failed to add subject to grade advising.');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  // ---- Mark a subject as dropped (per advising record) ----\r\n  const handleMarkDropped = async (record) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('grade_advising')\r\n        .update({ status: 'dropped' })\r\n        .eq('id', record.id);\r\n\r\n      if (error) throw error;\r\n\r\n      setAdvisingRecords((prev) =>\r\n        prev.map((r) =>\r\n          r.id === record.id ? { ...r, status: 'dropped' } : r\r\n        )\r\n      );\r\n    } catch (err) {\r\n      console.error('Error marking dropped:', err);\r\n      setErrorMessage(err.message || 'Failed to mark as dropped.');\r\n    }\r\n  };\r\n\r\n  // ---- Delete advising record ----\r\n  const handleDeleteRecord = async (record) => {\r\n    if (!window.confirm('Remove this subject from grade advising?')) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('grade_advising')\r\n        .delete()\r\n        .eq('id', record.id);\r\n\r\n      if (error) throw error;\r\n\r\n      setAdvisingRecords((prev) => prev.filter((r) => r.id !== record.id));\r\n    } catch (err) {\r\n      console.error('Error deleting advising record:', err);\r\n      setErrorMessage(err.message || 'Failed to delete advising record.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"grade-advising-container\">\r\n      {/* Tabs: Irregular / Dropped / Transferee / All */}\r\n      <div className=\"grade-advising-tabs\">\r\n        {statusTabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            className={`grade-tab ${statusTab === tab.id ? 'active' : ''}`}\r\n            onClick={() => setStatusTab(tab.id)}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grade-advising-body\">\r\n        <div className=\"grade-advising-header\">\r\n          <h2>Grade Advising</h2>\r\n\r\n          {selectedStudent && (\r\n            <div className=\"grade-advising-status-select\">\r\n              <label>Selected Student:</label>\r\n              <span>\r\n                {selectedStudent.student_number} •{' '}\r\n                {selectedStudent.last_name}, {selectedStudent.first_name}{' '}\r\n                ({selectedStudent.program_enrolled})\r\n              </span>\r\n              <span style={{ fontSize: '0.8rem', color: '#059669' }}>\r\n                • Status:{' '}\r\n                {selectedStudent.enrollment_status || 'active'}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Error banner */}\r\n        {errorMessage && (\r\n          <div className=\"error-banner\">\r\n            {errorMessage}\r\n          </div>\r\n        )}\r\n\r\n        {/* Search + Students table */}\r\n        <div style={{ marginBottom: '0.75rem' }}>\r\n          <div className=\"search-box\" style={{ maxWidth: 320 }}>\r\n            <span className=\"search-icon\">🔍</span>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search student (ID / name)...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <h3 style={{ fontSize: '0.9rem', color: '#065f46', marginBottom: '0.35rem' }}>\r\n          Students ({statusTab === 'all' ? 'All' : statusTab})\r\n        </h3>\r\n\r\n        {studentsLoading ? (\r\n          <div className=\"no-data\">Loading students...</div>\r\n        ) : studentsError ? (\r\n          <div className=\"no-data\">\r\n            Error loading students: {studentsError}\r\n          </div>\r\n        ) : filteredStudents.length === 0 ? (\r\n          <div className=\"no-data\">\r\n            No students found for this filter.\r\n          </div>\r\n        ) : (\r\n          <div className=\"applications-table-container\" style={{ marginBottom: '1rem' }}>\r\n            <table className=\"applications-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Student No</th>\r\n                  <th>Name</th>\r\n                  <th>Program</th>\r\n                  <th>Year Level</th>\r\n                  <th>Status</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredStudents.map((s) => (\r\n                  <tr\r\n                    key={s.id}\r\n                    style={{\r\n                      backgroundColor:\r\n                        selectedStudent?.id === s.id ? '#ecfdf5' : undefined,\r\n                    }}\r\n                  >\r\n                    <td>{s.student_number}</td>\r\n                    <td>\r\n                      {s.last_name}, {s.first_name}\r\n                    </td>\r\n                    <td>{s.program_enrolled}</td>\r\n                    <td>{s.year_level}</td>\r\n                    <td>{s.enrollment_status || 'active'}</td>\r\n                    <td>\r\n                      <button\r\n                        className=\"btn btn-primary micro\"\r\n                        onClick={() => setSelectedStudent(s)}\r\n                      >\r\n                        Select\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n\r\n        {/* Advising detail for selected student */}\r\n        {selectedStudent && (\r\n          <>\r\n            <h3 style={{ fontSize: '0.9rem', color: '#065f46', marginBottom: '0.35rem' }}>\r\n              Advised Subjects for {selectedStudent.last_name}, {selectedStudent.first_name}\r\n            </h3>\r\n\r\n            {advisingLoading ? (\r\n              <div className=\"no-data\">Loading grade advising...</div>\r\n            ) : advisingRecords.length === 0 ? (\r\n              <div className=\"no-data\">\r\n                No subjects advised yet for this student.\r\n              </div>\r\n            ) : (\r\n              <div className=\"table-wrapper\">\r\n                <table className=\"subjects-table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Subject</th>\r\n                      <th>Section</th>\r\n                      <th>Available Slot</th>\r\n                      <th>Status (Reg/Irreg/Drop)</th>\r\n                      <th>Units</th>\r\n                      <th>Date Advised</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {advisingRecords.map((rec) => {\r\n                      const subj = rec.subjects;\r\n                      const displaySubject = subj\r\n                        ? `${subj.subject_code || ''} ${subj.subject_name || ''}`.trim()\r\n                        : rec.subject;\r\n\r\n                      const slot =\r\n                        subj?.available_slot != null\r\n                          ? subj.available_slot\r\n                          : '—';\r\n\r\n                      const units =\r\n                        rec.units != null\r\n                          ? rec.units\r\n                          : subj?.units != null\r\n                          ? subj.units\r\n                          : '—';\r\n\r\n                      return (\r\n                        <tr\r\n                          key={rec.id}\r\n                          className={\r\n                            isIrregularStudent &&\r\n                            subj?.allowed_status?.toLowerCase() === 'regular'\r\n                              ? 'row-disabled'\r\n                              : ''\r\n                          }\r\n                        >\r\n                          <td>{displaySubject}</td>\r\n                          <td>{rec.section || subj?.section || '—'}</td>\r\n                          <td>{slot}</td>\r\n                          <td>{rec.status || 'N/A'}</td>\r\n                          <td>{units}</td>\r\n                          <td>\r\n                            {rec.created_at\r\n                              ? new Date(rec.created_at).toLocaleString()\r\n                              : '—'}\r\n                          </td>\r\n                          <td>\r\n                            <div style={{ display: 'flex', gap: '0.25rem' }}>\r\n                              <button\r\n                                className=\"btn micro btn-secondary\"\r\n                                type=\"button\"\r\n                                disabled={rec.status === 'dropped'}\r\n                                onClick={() => handleMarkDropped(rec)}\r\n                              >\r\n                                Drop\r\n                              </button>\r\n                              <button\r\n                                className=\"btn micro btn-secondary\"\r\n                                type=\"button\"\r\n                                onClick={() => handleDeleteRecord(rec)}\r\n                              >\r\n                                Remove\r\n                              </button>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                    <tr className=\"total-row\">\r\n                      <td colSpan={4} style={{ textAlign: 'right', fontWeight: 600 }}>\r\n                        Total Units:\r\n                      </td>\r\n                      <td style={{ fontWeight: 700 }}>{totalUnits}</td>\r\n                      <td colSpan={2}></td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n\r\n            {/* Add subject form */}\r\n            <div style={{ marginTop: '1rem' }}>\r\n              <h3 style={{ fontSize: '0.9rem', color: '#065f46', marginBottom: '0.35rem' }}>\r\n                Add Subject to Advising\r\n              </h3>\r\n              {subjectsLoading ? (\r\n                <div className=\"no-data\">Loading subjects...</div>\r\n              ) : subjects.length === 0 ? (\r\n                <div className=\"no-data\">\r\n                  No subjects available for this student's year level / status.\r\n                </div>\r\n              ) : (\r\n                <form\r\n                  onSubmit={handleAddAdvising}\r\n                  style={{\r\n                    display: 'flex',\r\n                    flexWrap: 'wrap',\r\n                    gap: '0.5rem',\r\n                    alignItems: 'center',\r\n                    marginTop: '0.25rem',\r\n                  }}\r\n                >\r\n                  <div style={{ minWidth: 220, flex: '1 1 220px' }}>\r\n                    <label\r\n                      style={{\r\n                        display: 'block',\r\n                        fontSize: '0.8rem',\r\n                        color: '#4b5563',\r\n                        marginBottom: '0.25rem',\r\n                      }}\r\n                    >\r\n                      Subject to be taken\r\n                    </label>\r\n                    <select\r\n                      value={newSubjectId}\r\n                      onChange={(e) => setNewSubjectId(e.target.value)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '0.4rem 0.5rem',\r\n                        borderRadius: 6,\r\n                        border: '1px solid #d1e7dd',\r\n                        fontSize: '0.8rem',\r\n                      }}\r\n                    >\r\n                      <option value=\"\">-- Select subject --</option>\r\n                      {subjects.map((subj) => (\r\n                        <option key={subj.id} value={subj.id}>\r\n                          {subj.subject_code} - {subj.subject_name} ({subj.units} units)\r\n                          {subj.allowed_status === 'regular'\r\n                            ? ' [Regular only]'\r\n                            : ''}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div style={{ minWidth: 140 }}>\r\n                    <label\r\n                      style={{\r\n                        display: 'block',\r\n                        fontSize: '0.8rem',\r\n                        color: '#4b5563',\r\n                        marginBottom: '0.25rem',\r\n                      }}\r\n                    >\r\n                      Section\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newSection}\r\n                      onChange={(e) => setNewSection(e.target.value)}\r\n                      placeholder=\"e.g. BSIT-1A\"\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '0.4rem 0.5rem',\r\n                        borderRadius: 6,\r\n                        border: '1px solid #d1e7dd',\r\n                        fontSize: '0.8rem',\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-primary micro\"\r\n                      disabled={saving || subjects.length === 0}\r\n                    >\r\n                      {saving ? 'Saving...' : 'Add Subject'}\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GradeAdvisingPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}