{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BaylonFam\\\\student-admission-system\\\\client-student\\\\src\\\\components\\\\FileUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { supabase } from '../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileUpload = ({\n  label,\n  fileType,\n  accept,\n  onFileUpload,\n  currentFile,\n  required\n}) => {\n  _s();\n  const [uploading, setUploading] = useState(false);\n  const handleFileUpload = async event => {\n    try {\n      setUploading(true);\n      const file = event.target.files[0];\n      if (!file) return;\n\n      // Validate file size (max 5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        alert('File size must be less than 5MB');\n        return;\n      }\n\n      // Check if user is authenticated, if not, use public upload method\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      const fileExt = file.name.split('.').pop();\n      const fileName = user ? `${user.id}/${fileType}_${Date.now()}.${fileExt}` : `public/${fileType}_${Date.now()}.${fileExt}`;\n      const filePath = `admission-documents/${fileName}`;\n\n      // Upload file to Supabase Storage\n      const {\n        error: uploadError\n      } = await supabase.storage.from('admission-files').upload(filePath, file);\n      if (uploadError) {\n        throw uploadError;\n      }\n\n      // Get public URL\n      const {\n        data\n      } = supabase.storage.from('admission-files').getPublicUrl(filePath);\n      onFileUpload(fileType, data.publicUrl);\n    } catch (error) {\n      console.error('Upload error:', error);\n      alert(`Error uploading ${label}: ${error.message}`);\n    } finally {\n      setUploading(false);\n      event.target.value = '';\n    }\n  };\n  const removeFile = () => {\n    onFileUpload(fileType, '');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"file-upload-group\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"file-upload-label\",\n      children: [label, \" \", required && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"required\",\n        children: \"*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"file-upload-container\",\n      children: !currentFile ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-upload-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: handleFileUpload,\n          disabled: uploading,\n          accept: accept,\n          className: \"file-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"upload-placeholder\",\n          children: uploading ? 'Uploading...' : `Click to upload ${label}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"file-name\",\n          children: \"\\u2705 File uploaded successfully\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: removeFile,\n          className: \"remove-file-btn\",\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: currentFile,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: \"view-file-btn\",\n          children: \"View\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUpload, \"7fSqO2OqLYyCuGUs/ZTqKghpSFk=\");\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","useState","supabase","jsxDEV","_jsxDEV","FileUpload","label","fileType","accept","onFileUpload","currentFile","required","_s","uploading","setUploading","handleFileUpload","event","file","target","files","size","alert","data","user","auth","getUser","fileExt","name","split","pop","fileName","id","Date","now","filePath","error","uploadError","storage","from","upload","getPublicUrl","publicUrl","console","message","value","removeFile","className","children","_jsxFileName","lineNumber","columnNumber","type","onChange","disabled","onClick","href","rel","_c","$RefreshReg$"],"sources":["C:/Users/BaylonFam/student-admission-system/client-student/src/components/FileUpload.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { supabase } from '../supabaseClient';\r\n\r\nconst FileUpload = ({ \r\n  label, \r\n  fileType, \r\n  accept, \r\n  onFileUpload, \r\n  currentFile,\r\n  required \r\n}) => {\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const handleFileUpload = async (event) => {\r\n    try {\r\n      setUploading(true);\r\n\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n\r\n      // Validate file size (max 5MB)\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        alert('File size must be less than 5MB');\r\n        return;\r\n      }\r\n\r\n      // Check if user is authenticated, if not, use public upload method\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      \r\n      const fileExt = file.name.split('.').pop();\r\n      const fileName = user \r\n        ? `${user.id}/${fileType}_${Date.now()}.${fileExt}`\r\n        : `public/${fileType}_${Date.now()}.${fileExt}`;\r\n      \r\n      const filePath = `admission-documents/${fileName}`;\r\n\r\n      // Upload file to Supabase Storage\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('admission-files')\r\n        .upload(filePath, file);\r\n\r\n      if (uploadError) {\r\n        throw uploadError;\r\n      }\r\n\r\n      // Get public URL\r\n      const { data } = supabase.storage\r\n        .from('admission-files')\r\n        .getPublicUrl(filePath);\r\n\r\n      onFileUpload(fileType, data.publicUrl);\r\n      \r\n    } catch (error) {\r\n      console.error('Upload error:', error);\r\n      alert(`Error uploading ${label}: ${error.message}`);\r\n    } finally {\r\n      setUploading(false);\r\n      event.target.value = '';\r\n    }\r\n  };\r\n\r\n  const removeFile = () => {\r\n    onFileUpload(fileType, '');\r\n  };\r\n\r\n  return (\r\n    <div className=\"file-upload-group\">\r\n      <label className=\"file-upload-label\">\r\n        {label} {required && <span className=\"required\">*</span>}\r\n      </label>\r\n      \r\n      <div className=\"file-upload-container\">\r\n        {!currentFile ? (\r\n          <div className=\"file-upload-area\">\r\n            <input\r\n              type=\"file\"\r\n              onChange={handleFileUpload}\r\n              disabled={uploading}\r\n              accept={accept}\r\n              className=\"file-input\"\r\n            />\r\n            <div className=\"upload-placeholder\">\r\n              {uploading ? 'Uploading...' : `Click to upload ${label}`}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"file-preview\">\r\n            <span className=\"file-name\">âœ… File uploaded successfully</span>\r\n            <button \r\n              type=\"button\" \r\n              onClick={removeFile}\r\n              className=\"remove-file-btn\"\r\n            >\r\n              Remove\r\n            </button>\r\n            <a \r\n              href={currentFile} \r\n              target=\"_blank\" \r\n              rel=\"noopener noreferrer\"\r\n              className=\"view-file-btn\"\r\n            >\r\n              View\r\n            </a>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}