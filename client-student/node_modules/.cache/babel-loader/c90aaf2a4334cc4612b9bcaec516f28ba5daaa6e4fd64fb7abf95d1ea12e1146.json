{"ast":null,"code":"export const resolveFetch = customFetch => {\n  if (customFetch) {\n    return (...args) => customFetch(...args);\n  }\n  return (...args) => fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n  return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n  const fetch = resolveFetch(customFetch);\n  const HeadersConstructor = resolveHeadersConstructor();\n  return async (input, init) => {\n    var _a;\n    const accessToken = (_a = await getAccessToken()) !== null && _a !== void 0 ? _a : supabaseKey;\n    let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n    if (!headers.has('apikey')) {\n      headers.set('apikey', supabaseKey);\n    }\n    if (!headers.has('Authorization')) {\n      headers.set('Authorization', `Bearer ${accessToken}`);\n    }\n    return fetch(input, Object.assign(Object.assign({}, init), {\n      headers\n    }));\n  };\n};","map":{"version":3,"names":["resolveFetch","customFetch","args","fetch","resolveHeadersConstructor","Headers","fetchWithAuth","supabaseKey","getAccessToken","HeadersConstructor","input","init","accessToken","_a","headers","has","set","Object","assign"],"sources":["C:\\Users\\jonch\\OneDrive\\Desktop\\Student-Admission--main\\client-student\\node_modules\\@supabase\\supabase-js\\src\\lib\\fetch.ts"],"sourcesContent":["type Fetch = typeof fetch\r\n\r\nexport const resolveFetch = (customFetch?: Fetch): Fetch => {\r\n  if (customFetch) {\r\n    return (...args: Parameters<Fetch>) => customFetch(...args)\r\n  }\r\n  return (...args: Parameters<Fetch>) => fetch(...args)\r\n}\r\n\r\nexport const resolveHeadersConstructor = () => {\r\n  return Headers\r\n}\r\n\r\nexport const fetchWithAuth = (\r\n  supabaseKey: string,\r\n  getAccessToken: () => Promise<string | null>,\r\n  customFetch?: Fetch\r\n): Fetch => {\r\n  const fetch = resolveFetch(customFetch)\r\n  const HeadersConstructor = resolveHeadersConstructor()\r\n\r\n  return async (input, init) => {\r\n    const accessToken = (await getAccessToken()) ?? supabaseKey\r\n    let headers = new HeadersConstructor(init?.headers)\r\n\r\n    if (!headers.has('apikey')) {\r\n      headers.set('apikey', supabaseKey)\r\n    }\r\n\r\n    if (!headers.has('Authorization')) {\r\n      headers.set('Authorization', `Bearer ${accessToken}`)\r\n    }\r\n\r\n    return fetch(input, { ...init, headers })\r\n  }\r\n}\r\n"],"mappings":"AAEA,OAAO,MAAMA,YAAY,GAAIC,WAAmB,IAAW;EACzD,IAAIA,WAAW,EAAE;IACf,OAAO,CAAC,GAAGC,IAAuB,KAAKD,WAAW,CAAC,GAAGC,IAAI,CAAC;EAC7D;EACA,OAAO,CAAC,GAAGA,IAAuB,KAAKC,KAAK,CAAC,GAAGD,IAAI,CAAC;AACvD,CAAC;AAED,OAAO,MAAME,yBAAyB,GAAGA,CAAA,KAAK;EAC5C,OAAOC,OAAO;AAChB,CAAC;AAED,OAAO,MAAMC,aAAa,GAAGA,CAC3BC,WAAmB,EACnBC,cAA4C,EAC5CP,WAAmB,KACV;EACT,MAAME,KAAK,GAAGH,YAAY,CAACC,WAAW,CAAC;EACvC,MAAMQ,kBAAkB,GAAGL,yBAAyB,EAAE;EAEtD,OAAO,OAAOM,KAAK,EAAEC,IAAI,KAAI;;IAC3B,MAAMC,WAAW,GAAG,CAAAC,EAAA,GAAC,MAAML,cAAc,EAAG,cAAAK,EAAA,cAAAA,EAAA,GAAIN,WAAW;IAC3D,IAAIO,OAAO,GAAG,IAAIL,kBAAkB,CAACE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,OAAO,CAAC;IAEnD,IAAI,CAACA,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC,EAAE;MAC1BD,OAAO,CAACE,GAAG,CAAC,QAAQ,EAAET,WAAW,CAAC;IACpC;IAEA,IAAI,CAACO,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,EAAE;MACjCD,OAAO,CAACE,GAAG,CAAC,eAAe,EAAE,UAAUJ,WAAW,EAAE,CAAC;IACvD;IAEA,OAAOT,KAAK,CAACO,KAAK,EAAAO,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAOP,IAAI;MAAEG;IAAO,GAAG;EAC3C,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}